{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","MostrarResumen","nombreCita","fechaCita","validacionFecha","horaCita","document","querySelector","addEventListener","evento","target","value","split","mostrarAlerta","eliminarAlerta","alerta","remove","infecha","fechaActual","Date","year","getFullYear","month","getMonth","day","getDate","fechaFormato","min","event","dia","getUTCDay","includes","preventDefault","nombreTexto","trim","length","msj","type","createElement","textContent","classList","add","appendChild","setTimeout","_","console","log","resumenDiv","firstChild","removeChild","Object","values","nonServicios","nombre_cita","innerHTML","fecha_cita","hora_cita","siguiente","anterior","existeSeccion","existeSombreado","querySelectorAll","forEach","enlace","parseInt","dataset","paso","async","response","fetch","db","json","servicio","id","precio","contedorServicio","nombreServicio","precioServicio","selector","idServicio","onclick","funcionClick","error","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","servicioOBJ","push","filter"],"mappings":"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","file":"bundle.js","sourcesContent":["//globales\r\nlet pagina = 1;\r\nconst cita = {\r\n    nombre: '',\r\n    fecha: '',\r\n    hora: '',\r\n    servicios: []\r\n}\r\n\r\nfunction iniciarApp(){\r\n\r\n    //mostrarServicios\r\n    mostrarServicios();\r\n\r\n    //resalta el div actual segun el tab que se presiona\r\n    mostrarSeccion();\r\n\r\n    //oculta o muestrauna seccion segun el tab que se presiona\r\n    cambiarSeccion();\r\n\r\n    //PAGINACION\r\n    paginaSiguiente();\r\n\r\n    paginaAnterior();\r\n\r\n    botonesPaginador();\r\n\r\n    //MUESTRA EL RESUMEN DE LA CITA\r\n    MostrarResumen();\r\n\r\n    //ALMACENA EL NOMBRE DE LA CITA EN EL OBJETO\r\n    nombreCita();\r\n\r\n    //ALMACENA LA FECHA DE LA CITA EN EL OBJETO\r\n    fechaCita();\r\n\r\n    //DESABILITA FECHAS ANTERIORES\r\n    validacionFecha();\r\n\r\n    //ALMACENA LA HORA DE LA CITA EN EL ONJETO\r\n    horaCita();\r\n}\r\n\r\nfunction horaCita() {\r\n    const horaCita = document.querySelector('#hora');\r\n    horaCita.addEventListener('input', evento =>{\r\n        const hora = evento.target.value.split(':');\r\n        if(hora[0] <= 9 || hora[0] >= 18){\r\n            mostrarAlerta('La atención no está disponible en la hora seleccionada', 'error');\r\n            horaCita.value = '';\r\n            return;\r\n        }\r\n        eliminarAlerta();\r\n        cita.hora = evento.target.value;\r\n    });\r\n}\r\n\r\nfunction eliminarAlerta(){\r\n    const alerta = document.querySelector('.alerta');\r\n        if(alerta){\r\n            alerta.remove();\r\n        }\r\n}\r\n\r\nfunction validacionFecha(){\r\n    const infecha = document.querySelector('#fecha');\r\n\r\n    const fechaActual = new Date();\r\n    const year = fechaActual.getFullYear();\r\n    const month = fechaActual.getMonth() + 1;//porque empieza a contar desde el 0 los meses siendo enero el mes 0\r\n    const day = fechaActual.getDate();\r\n\r\n    // const mes = fechaActual.\r\n\r\n    //FORMATO DESEADO YYYY-MM-DD\r\n    let fechaFormato;\r\n    //VALIDACION DE 0 DEL DIA Y EL MES\r\n    if (month < 10) {\r\n        fechaFormato = `${year}-0${month}-${day}`;\r\n    }else if(day < 9){\r\n        fechaFormato = `${year}-${month}-0${day}`;\r\n    }else{\r\n        fechaFormato = `${year}-${month}-${day}`;\r\n    }\r\n\r\n    //añadir minima fecha con e formato que realizamos\r\n    infecha.min = fechaFormato;//para acceder a un atributo y cambiarle su valor es --> nombreselector.nombreatributo\r\n}\r\n\r\nfunction fechaCita(){\r\n    const fecha = document.querySelector('#fecha');\r\n\r\n    fecha.addEventListener('input', event=>{\r\n        const dia = new Date(event.target.value).getUTCDay();//objeto fecha para tener acceso a las funciones de fecha el getutcday() nos retorna el numero del dia del 0 al 6, siendo 0 domingo\r\n        \r\n        if([0, 6].includes(dia)){\r\n            event.preventDefault();//para evitar que los fines de semana se agreguen al input\r\n            fecha.value = '';\r\n            mostrarAlerta('Fines de semana no validos', 'error');\r\n            return;\r\n        }\r\n        eliminarAlerta();\r\n        cita.fecha = fecha.value;\r\n    });\r\n\r\n}\r\n\r\nfunction nombreCita(){\r\n    const nombreInput = document.querySelector('#nombre');\r\n    \r\n    //EVENTO INPUT\r\n    nombreInput.addEventListener('input', evento=>{\r\n        const nombreTexto = evento.target.value.trim();//mostrar texto que se esta ecribiendo en tiempo real, recuerda que trim() elimina los espacios al inicio y final de un texto\r\n\r\n        //el input debe tener algo\r\n        if(nombreTexto==='' || nombreTexto.length < 3){\r\n            mostrarAlerta('Nombre no valido', 'error');\r\n            return;\r\n        }\r\n        eliminarAlerta();\r\n        cita.nombre = nombreTexto;\r\n    });\r\n}\r\n\r\nfunction mostrarAlerta(msj, type){\r\n\r\n    //eliminar repeticion de alertas\r\n    const alertaPrevia = document.querySelector('.alerta');\r\n    if(alertaPrevia){\r\n        return;\r\n    }\r\n\r\n    const alerta = document.createElement('P')\r\n    alerta.textContent = msj;\r\n    alerta.classList.add('alerta');\r\n\r\n    if (type === 'error'){\r\n        alerta.classList.add('error');\r\n    }\r\n\r\n    //INSERTAR EN EL HTML\r\n    const formulario = document.querySelector('.formulario');\r\n    formulario.appendChild(alerta);\r\n\r\n    //ELIMINAR LA ALERTA DESPUES DE 3 SEGUNDOS\r\n    setTimeout(_=>{\r\n        alerta.remove();\r\n    },3000);\r\n}\r\n\r\nfunction MostrarResumen(){\r\n    //Destructuring\r\n    const {nombre, fecha, hora, servicios} = cita;\r\n    console.log(cita)\r\n\r\n    //Seleccionar resumen\r\n    const resumenDiv = document.querySelector('.contenido-resumen');\r\n\r\n    // LIMPIAR HTML PREVIO\r\n    while(resumenDiv.firstChild){\r\n        resumenDiv.removeChild(resumenDiv.firstChild);\r\n    }\r\n\r\n    //validacion de objeto\r\n    if(Object.values(cita).includes('') || cita.servicios.length === 0) {//object.values para extraer los valores del objeto\r\n        const nonServicios = document.createElement('P');\r\n        nonServicios.textContent = 'Faltan Datos de Servicios, Hora, Fecha o Nombre';\r\n        nonServicios.classList.add('invalidar-cita');\r\n\r\n        //agregar hijo\r\n        resumenDiv.appendChild(nonServicios);\r\n        return;\r\n    }\r\n\r\n    //MOSTRAR EL RESUMEN\r\n    const nombre_cita = document.createElement('P');\r\n    nombre_cita.innerHTML = `<span>Nombre:</span> ${nombre}`;//la misma funcion que textContent solo que este trata las etiquetas html como etiquetas mientras que el otro trata todo como textto\r\n\r\n    const fecha_cita = document.createElement('P');\r\n    fecha_cita.innerHTML = `<span>Fecha:</span> ${fecha}`;\r\n\r\n    const hora_cita = document.createElement('P');\r\n    hora_cita.innerHTML = `<span>Hora:</span> ${hora}`;\r\n\r\n    resumenDiv.appendChild(nombre_cita);\r\n    resumenDiv.appendChild(fecha_cita);\r\n    resumenDiv.appendChild(hora_cita);\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    paginaSiguiente.addEventListener('click', evento =>{\r\n        pagina++;\r\n        botonesPaginador();\r\n        mostrarSeccion();\r\n\r\n    })\r\n}\r\n\r\nfunction paginaAnterior(){\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    paginaAnterior.addEventListener('click', evento =>{\r\n        pagina--;\r\n        botonesPaginador();\r\n        mostrarSeccion();\r\n    })\r\n}\r\n\r\nfunction botonesPaginador(){ \r\n    const siguiente = document.querySelector('#siguiente');\r\n    const anterior = document.querySelector('#anterior');\r\n\r\n    if(pagina === 1){\r\n        anterior.classList.add('ocultar');\r\n        siguiente.classList.remove('ocultar')\r\n    }else if(pagina === 2){\r\n        anterior.classList.remove('ocultar');\r\n        siguiente.classList.remove('ocultar');\r\n        MostrarResumen();\r\n    }else if(pagina === 3){\r\n        siguiente.classList.add('ocultar');\r\n        anterior.classList.remove('ocultar');\r\n    }\r\n}\r\n\r\nfunction mostrarSeccion(){\r\n    const existeSeccion = document.querySelector('.mostrar-seccion');\r\n    const existeSombreado = document.querySelector(`.navegacion .sombreado`);\r\n\r\n    if(existeSeccion && existeSombreado){\r\n        existeSombreado.classList.remove('sombreado');\r\n        existeSeccion.classList.remove('mostrar-seccion');\r\n    }\r\n\r\n    const seccion = document.querySelector(`#paso-${pagina}`);\r\n    seccion.classList.add('mostrar-seccion'); \r\n\r\n    const sombreado = document.querySelector(`[data-paso=\"${pagina}\"]`)\r\n    sombreado.classList.add('sombreado'); \r\n}\r\n\r\nfunction cambiarSeccion(){\r\n    const enlaces = document.querySelectorAll('.navegacion button');\r\n    enlaces.forEach(enlace => {\r\n        enlace.addEventListener('click', evento => {\r\n            evento.preventDefault();\r\n            pagina = parseInt(evento.target.dataset.paso);//obetener el texto de un dataset, paso porque lo nombramos paso en el index \r\n            mostrarSeccion();\r\n            botonesPaginador(); \r\n        });\r\n    });\r\n}\r\n\r\nasync function mostrarServicios(){\r\n    try {\r\n        const response = await fetch('./servicios.json')  \r\n        const db = await response.json()  \r\n        const { servicios } = db;  \r\n        //Generar Html\r\n        servicios.forEach(servicio => {\r\n            const { id, nombre, precio } = servicio;\r\n\r\n            //DOM SCRIPTING\r\n            const contedorServicio =document.createElement ('DIV')\r\n            const nombreServicio = document.createElement('P')\r\n            const precioServicio = document.createElement('P');\r\n            const selector = document.querySelector('.listado-servicios');\r\n\r\n            contedorServicio.classList.add('contenido-servicio')\r\n            nombreServicio.textContent = nombre;\r\n            precioServicio.textContent = `$ ${precio}`;\r\n\r\n            selector.appendChild(contedorServicio);\r\n            contedorServicio.appendChild(nombreServicio);\r\n            contedorServicio.appendChild(precioServicio);\r\n\r\n            //AGREGAR ID\r\n            contedorServicio.dataset.idServicio = id;\r\n            \r\n            //EVENTO CLCIK CONTENEDOR SERVICIO\r\n            contedorServicio.onclick = funcionClick;//la diferencia entre addEventListener y onclick es que onclick es mas util cuando lo usas en elementos que estas creando\r\n             \r\n        });\r\n        \r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction funcionClick(event){\r\n    let target;\r\n    //FORZAR EL CLICK AL ID\r\n    if(event.target.tagName === 'P'){\r\n        target = event.target.parentElement;//para que al dar click en e parrafo nos retorne el elemento padre\r\n    }else{\r\n        target = event.target;\r\n    }\r\n    if(target.classList.contains('seleccionado')){\r\n        target.classList.remove('seleccionado');\r\n        const id = parseInt(target.dataset.idServicio)\r\n        eliminarServicio(id);\r\n    }else{\r\n        target.classList.add('seleccionado');\r\n        const servicioOBJ = {\r\n            id: parseInt( target.dataset.idServicio ),\r\n            nombreServicio: target.firstElementChild.textContent,//para obtener el primer elemento hijo\r\n            precio: target.firstElementChild.nextElementSibling.textContent\r\n        }\r\n\r\n        agregarServicio(servicioOBJ);\r\n    }\r\n}\r\n\r\nfunction agregarServicio(servicioOBJ){\r\n    //primera forma de generar el array de objetos\r\n    const { servicios } = cita;\r\n    // cita.servicios = [...servicios, servicioOBJ];//los tres puntos sirven para copiar un arreglo o un objeto\r\n\r\n    // cita.servicios.push(servicioOBJ)\r\n    servicios.push(servicioOBJ)\r\n    console.log(cita.servicios)\r\n}\r\n\r\nfunction eliminarServicio(id){\r\n    let { servicios } = cita;\r\n    cita.servicios = servicios.filter(servicio=> servicio.id !== id)//El método filter() crea un nuevo array con todos los elementos que cumplan la condición que le estamos pasando\r\n    console.log(cita.servicios)\r\n}\r\ndocument.addEventListener('DOMContentLoaded', iniciarApp);"]}